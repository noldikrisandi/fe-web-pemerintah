import{q as B,Z as k,r as j,j as a,B as S,V as b,T as x,F as t,E as r,G as d,$ as c,m as L,b as v}from"./index-CySiJ9US.js";import{T as w}from"./chunk-4IH3O7BJ-Q8nFKEXr.js";const P=()=>{const i=new Date,g=i.getFullYear().toString()+(i.getMonth()+1).toString().padStart(2,"0")+i.getDate().toString().padStart(2,"0")+i.getHours().toString().padStart(2,"0")+i.getMinutes().toString().padStart(2,"0"),e=Math.random().toString(36).substr(2,4).toUpperCase();return g+e},y=["Balaesang","Balaesang Tanjung","Banawa","Banawa Selatan","Banawa Tengah","Dampelas","Labuan","Pinembani","Rio Pakava","Sindue","Sindue Tobata","Sindue Tombusabora","Sirenja","Sojol","Sojol Utara","Tanantovea"],M={Balaesang:["Kampung Baru Sibayu","Labean","Lombonga","Malino","Tanjung Batu","Siney","Balaesang","Baluase","Sombori","Sigi","Poreang"],"Balaesang Tanjung":["Kamonji","Ketong","Malei","Manimbaya","Sibaju","Tonggo","Makmur","Tanjung Makmur","Tanjung Satu","Tanjung Dua"],Banawa:["Loli Dondo","Loli Oge","Loli Pesua","Loli Saluran","Banawa","Tanjung Banawa","Seke","Loli Selatan","Banawa Barat","Banawa Timur"],"Banawa Selatan":["Banawa Selatan","Banawa Selatan Barat","Banawa Selatan Timur","Banawa Selatan Utara","Banawa Selatan Laut","Banawa Selatan Daya"],"Banawa Tengah":["Banawa Tengah","Banawa Tengah Barat","Banawa Tengah Timur","Banawa Tengah Utara","Banawa Tengah Selatan","Banawa Tengah Laut","Banawa Tengah Daya"],Dampelas:["Kambayang","Talaga","Sabang","Sioyong","Karya Mukti","Parisan Agung","Mukti Agung","Budi Mukti","Pani'i","Ponggerang","Malonas","Rerang","Lembah Mukti"],Labuan:["Labuan","Labuan Barat","Labuan Timur","Labuan Utara","Labuan Selatan","Labuan Tengah","Labuan Barat Laut","Labuan Timur Laut","Labuan Utara Laut","Labuan Selatan Laut","Labuan Tengah Laut"],Pinembani:["Gimpubia","Gumpang","Gumpang Barat","Gumpang Timur","Gumpang Utara","Pulai","Tano","Pasei","Sawer"],"Rio Pakava":["Tampo","Limbo","Paci","Lumban","Matakara","Bulan","Sero","Pakon","Jambo","Sionbualu"],Sindue:["Puskesmas Sindue","Sindue Dodo","Lowe","Lau","Sinombu","Siotapina"],"Sindue Tobata":["Sindue","Tobata","Palanto","Bumbung","Bulu","Uji","Tona","Lumpe","Ponu","Cilele"],"Sindue Tombusabora":["Tombusabora","Moa","Asra","Lumpung","Sere","Alang-alang","Lembang"],Sirenja:["Sirenja","Sere","Badu","Bunde","Sawal","Momboy"],Sojol:["Sojol","Banyu","Seru","Pombo","Pondoke","Labuan"],"Sojol Utara":["Banggai","Santan","Lebui","Palawa","Tatu","Sijuli"],Tanantovea:["Tovea","Paku","Ulu Tovea","Sirombu","Sodiki","Dungga","Rokan"]},K=()=>{var h;const i=B(),g=k(),[e,p]=j.useState({id:"",Jenis:"",kecamatan:"",desa:"",keterangan:"",url_foto:"",url_proposal:"",id_pengirim:""});j.useEffect(()=>{const n=localStorage.getItem("id");console.log("User ID from localStorage:",n),p(o=>({...o,id:P(),id_pengirim:n||""}))},[]);const s=n=>{const{name:o,value:u}=n.target;p(l=>({...l,[o]:u,...o==="kecamatan"&&{desa:""}}))},T=async n=>{var o,u;n.preventDefault();try{const l=await v.post("/aspirations",e);i({title:"Sukses!",description:"Aspirasi berhasil dikirim.",status:"success",duration:3e3,isClosable:!0}),g("/aspirasisaya")}catch(l){const m=((u=(o=l.response)==null?void 0:o.data)==null?void 0:u.error)||"Terjadi kesalahan. Coba lagi nanti.";m.includes("Anda hanya dapat mengirim 2 aspirasi")?i({title:"Batas Aspirasi Tercapai",description:m,status:"error",duration:5e3,isClosable:!0}):i({title:"Gagal mengirim aspirasi!",description:m,status:"error",duration:5e3,isClosable:!0})}};return a.jsxs(S,{maxW:"500px",mx:"auto",p:4,borderWidth:1,borderRadius:"lg",children:[a.jsx(S,{p:4,borderRadius:"md",boxShadow:"md",textAlign:"center",mb:6,children:a.jsxs(b,{spacing:2,children:[a.jsx(x,{fontSize:"lg",fontWeight:"bold",color:"teal.800",letterSpacing:"wider",children:"Anda hanya bisa memberikan 2 Aspirasi dalam satu minggu"}),a.jsx(x,{color:"gray.600",fontSize:"sm",children:"Harap perhatikan batasan ini untuk menjaga kualitas aspirasi yang diterima."})]})}),a.jsx("form",{onSubmit:T,autoComplete:"off",children:a.jsxs(b,{spacing:4,children:[a.jsxs(t,{children:[a.jsx(r,{children:"Token Aspirasi"}),a.jsx(d,{name:"id",value:e.id,isReadOnly:!0})]}),a.jsxs(t,{isRequired:!0,children:[a.jsx(r,{children:"Jenis Aspirasi"}),a.jsxs(c,{name:"Jenis",value:e.Jenis,onChange:s,children:[a.jsx("option",{value:"",children:"Pilih Jenis Aspirasi"}),a.jsx("option",{value:"Infrastruktur",children:"Infrastruktur"}),a.jsx("option",{value:"Ekonomi",children:"Ekonomi"}),a.jsx("option",{value:"Lingkungan",children:"Lingkungan"}),a.jsx("option",{value:"Sosial",children:"Sosial"}),a.jsx("option",{value:"Pendidikan",children:"Pendidikan"}),a.jsx("option",{value:"Kesehatan",children:"Kesehatan"}),a.jsx("option",{value:"Keamanan",children:"Keamanan"}),a.jsx("option",{value:"Transportasi",children:"Transportasi"}),a.jsx("option",{value:"Perumahan",children:"Perumahan"}),a.jsx("option",{value:"Ketenagakerjaan",children:"Ketenagakerjaan"}),a.jsx("option",{value:"Pemberdayaan Masyarakat",children:"Pemberdayaan Masyarakat"}),a.jsx("option",{value:"Hukum",children:"Hukum"}),a.jsx("option",{value:"Teknologi",children:"Teknologi"}),a.jsx("option",{value:"Budaya",children:"Budaya"}),a.jsx("option",{value:"UMKM",children:"UMKM"}),a.jsx("option",{value:"Lainnya",children:"Lainnya"})]})]}),a.jsxs(t,{isRequired:!0,children:[a.jsx(r,{children:"Kecamatan"}),a.jsxs(c,{name:"kecamatan",value:e.kecamatan,onChange:s,children:[a.jsx("option",{value:"",children:"Pilih Kecamatan"}),y.map(n=>a.jsx("option",{value:n,children:n},n))]})]}),a.jsxs(t,{isRequired:!0,children:[a.jsx(r,{children:"Desa/Kelurahan"}),a.jsxs(c,{name:"desa",value:e.desa,onChange:s,disabled:!e.kecamatan,children:[a.jsx("option",{value:"",children:"Pilih Desa/Kelurahan"}),(h=M[e.kecamatan])==null?void 0:h.map(n=>a.jsx("option",{value:n,children:n},n))]})]}),a.jsxs(t,{isRequired:!0,children:[a.jsx(r,{children:"Keterangan"}),a.jsx(w,{name:"keterangan",value:e.keterangan,onChange:s})]}),a.jsxs(t,{children:[a.jsx(r,{children:"URL Foto"}),a.jsx(d,{name:"url_foto",type:"url",value:e.url_foto,onChange:s})]}),a.jsxs(t,{children:[a.jsx(r,{children:"URL Proposal"}),a.jsx(d,{name:"url_proposal",type:"url",value:e.url_proposal,onChange:s})]}),a.jsxs(t,{hidden:!0,children:[a.jsx(r,{children:"ID Pengirim"}),a.jsx(d,{name:"id_pengirim",value:e.id_pengirim,isReadOnly:!0})]}),a.jsx(L,{type:"submit",colorScheme:"blue",width:"full",children:"Kirim Aspirasi"})]})})]})};export{K as default};
