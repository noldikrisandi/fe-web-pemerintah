import{r as k,q as w,Z as f,j as e,B as m,H as L,F as c,E as u,G as g,m as S,T as v,L as y,b as h}from"./index-CySiJ9US.js";const C=()=>{const[s,x]=k.useState({email:"",password:""}),r=w(),p=f(),o=a=>{x({...s,[a.target.name]:a.target.value})},b=async a=>{var n,i;a.preventDefault();try{const d=(await h.post("/login",s)).data.token;localStorage.setItem("user_token",d);const t=(await h.get("/users",{headers:{Authorization:`Bearer ${d}`}})).data.find(j=>j.email===s.email);t&&(localStorage.setItem("userName",t.nama),localStorage.setItem("id",t.id)),r({title:"Login berhasil!",status:"success"}),p("/")}catch(l){r({title:"Login gagal!",description:((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.error)||"Periksa kembali email dan password Anda.",status:"error"})}};return e.jsxs(m,{maxW:"md",mx:"auto",mt:10,p:5,borderWidth:1,borderRadius:"md",children:[e.jsx(L,{as:"h2",mb:6,textAlign:"center",children:"Login"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs(c,{mb:4,children:[e.jsx(u,{children:"Email"}),e.jsx(g,{type:"email",name:"email",value:s.email,onChange:o,required:!0})]}),e.jsxs(c,{mb:4,children:[e.jsx(u,{children:"Password"}),e.jsx(g,{type:"password",name:"password",value:s.password,onChange:o,required:!0})]}),e.jsx(S,{colorScheme:"blue",width:"full",type:"submit",children:"Login"})]}),e.jsx(v,{color:"gray.600",textAlign:"center",mt:10,mb:3,children:"Silahkan Registrasi jika belum memiliki akun"}),e.jsx(m,{textAlign:"center",bold:!0,color:"blue.500",_hover:{color:"blue.700",textDecoration:"underline"},children:e.jsx(y,{to:"/register",children:"Register"})})]})};export{C as default};
