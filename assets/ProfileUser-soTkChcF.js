import{f as C,u as W,o as k,j as a,d as E,e as I,r as i,q as D,B as P,H as R,S as F,a5 as T,a6 as U,V as z,T as A,F as p,E as j,G as S,m as y,b as w}from"./index-CySiJ9US.js";import{c as B,d as N}from"./index-l5Nv6hqG.js";var v=C(function(n,f){const{borderLeftWidth:c,borderBottomWidth:h,borderTopWidth:m,borderRightWidth:e,borderWidth:l,borderStyle:t,borderColor:u,...g}=W("Divider",n),{className:d,orientation:b="horizontal",__css:r,...x}=k(n),s={vertical:{borderLeftWidth:c||e||l||"1px",height:"100%"},horizontal:{borderBottomWidth:h||m||l||"1px",width:"100%"}};return a.jsx(E.hr,{ref:f,"aria-orientation":b,...x,__css:{...g,border:"0",borderColor:u,borderStyle:t,...s[b],...r},className:I("chakra-divider",d)})});v.displayName="Divider";const G=()=>{const[o,n]=i.useState(null),[f,c]=i.useState(!0),[h,m]=i.useState(""),[e,l]=i.useState(!1),[t,u]=i.useState({nama:"",email:"",wa:""}),g=D();i.useEffect(()=>{(async()=>{const x=localStorage.getItem("id");if(!x){m("User ID tidak ditemukan. Silakan login ulang."),c(!1);return}try{const s=await w.get(`/users/${x}`);n(s.data),u({nama:s.data.nama,email:s.data.email,wa:s.data.wa})}catch{m("Gagal mengambil data profil. Coba lagi nanti.")}finally{c(!1)}})()},[]);const d=r=>{u({...t,[r.target.name]:r.target.value})},b=async()=>{try{await w.put(`/users/${o.id}`,t),n({...o,...t}),localStorage.setItem("userName",t.nama),l(!1),g({title:"Profil diperbarui!",description:"Data Anda telah berhasil diperbarui.",status:"success",duration:3e3,isClosable:!0})}catch{g({title:"Gagal memperbarui!",description:"Terjadi kesalahan saat memperbarui data.",status:"error",duration:3e3,isClosable:!0})}};return a.jsxs(P,{maxW:{base:"90%",md:"500px"},mx:"auto",p:6,borderWidth:1,borderRadius:"lg",boxShadow:"lg",bg:"white",children:[a.jsx(R,{size:"lg",mb:4,textAlign:"center",color:"teal.600",children:"Profil Pengguna"}),a.jsx(v,{mb:4}),f&&a.jsx(F,{size:"xl",color:"teal.500",mx:"auto",display:"block"}),h&&a.jsxs(T,{status:"error",mb:4,children:[a.jsx(U,{}),h]}),o&&a.jsxs(z,{spacing:4,align:"start",children:[a.jsxs(A,{fontSize:"sm",color:"gray.600",children:["ID: ",o.id]}),a.jsxs(p,{children:[a.jsx(j,{fontWeight:"bold",children:"Nama"}),a.jsx(S,{name:"nama",value:t.nama,onChange:d,isReadOnly:!e,bg:e?"white":"gray.100"})]}),a.jsxs(p,{children:[a.jsx(j,{fontWeight:"bold",children:"Email"}),a.jsx(S,{name:"email",type:"email",value:t.email,onChange:d,isReadOnly:!e,bg:e?"white":"gray.100"})]}),a.jsxs(p,{children:[a.jsx(j,{fontWeight:"bold",children:"WhatsApp"}),a.jsx(S,{name:"wa",value:t.wa,onChange:d,isReadOnly:!e,bg:e?"white":"gray.100"})]}),e?a.jsx(y,{leftIcon:a.jsx(B,{}),colorScheme:"blue",onClick:b,width:"full",children:"Simpan Perubahan"}):a.jsx(y,{leftIcon:a.jsx(N,{}),colorScheme:"teal",onClick:()=>l(!0),width:"full",children:"Edit Profil"})]})]})};export{G as default};
